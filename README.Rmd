---
title: "Speed Dating Data Exploration"
date: "April 18, 2019"
output: rmarkdown::github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(collapse=TRUE, comment="##", fig.retina=2, fig.path = "README_figs/README-")
```



This data set was created and generated by Raymond Fisman, Sheena S. Iyengar, Emir Kamenica and Itamar Simonson from the University of Columbia School of Business in 2002-2004. They used this data to for their research paper called, "Gender Differences in Mate Selection: Evidence From a Speed Dating Experiment." The original purpose of the research was to analyze gender differences in dating preferences. They wanted to study dating behavior using an experimental speed dating market and serve as a starting point in understanding the thought process of selecting a mate. Everyone participating in the speed dating experiment get matched into pairs; male and female. they have a short, 4 minute conversation to make a good first impression. After each interaction, participants were asked to fill out a scorecard about what they thought about their potential partner. After cycling around everyone, each participant are asked who they want to date. If both feel the same way then their is match, but if either person says no then their is no match.


Load Packages
```{r, warning = FALSE, message = FALSE}
library(magrittr)
library(dplyr)
library(ggplot2)
library(GGally)
library(cowplot)
library(GGally)
library(treemap)
library(data.table)
library(corrplot)
library(caret)
library(randomForest)
library(e1071)
library(gbm)
library(glmnet)
library(MASS)
library(klaR)
library(qcc)
library(colorspace)
library(ModelMetrics)
library(kableExtra)
```

To begin our analysis, We have 2 defined groups: male and female. lets remove irrelevant columns or redundant columns based on the knowledge of the data. After spiting the data to male and female Let's split the data into groups who managed to get a date and did not get a date.

```{r dataset, echo=FALSE}
rawdata = read.csv("speed dating.csv", header = TRUE)
data = as.data.frame(rawdata)
genderSet = split(data, data$gender)
fmatchSet = split(genderSet$female, genderSet$female$match)
mmatchSet = split(genderSet$male, genderSet$male$match)
```

Since there are so many variables, it would be too lengthy to summarize all of them, so I will present the most interesting or relevant to this analysis.

```{r 1st plot echo=FALSE}
ggplot(data, aes(x=as.factor(age),fill=gender)) + 
  geom_bar(data=subset(data,gender =="female")) + 
  geom_bar(data=subset(data,gender =="male"),aes(y=..count..*(-1))) + 
  scale_y_continuous(breaks=seq(-1000,1000,50),labels=abs(seq(-1000,1000,50))) + 
  coord_flip()


frace = genderSet$female["race"]
mrace = genderSet$male["race"]

frace = as.data.frame(frace)
mrace = as.data.frame(mrace)

ggplot(frace, aes(x = race)) + geom_bar(aes(fill = race), position = "dodge") + ggtitle("Male Race Distribution")
ggplot(mrace, aes(x = race)) + geom_bar(aes(fill = race), position = "dodge") + ggtitle("Female Race Distribution")
```

The bar plot shows European/Caucasian-Americans are over represented in this data so their preferences and values might dominate certain attribute statistics. Most people in the data set were in there 20s-30s.

```{r 2nd plot echo=FALSE}

ggparcoord(genderSet$male, columns = 17:22, groupColumn = 'match', scale = 'uniminmax', title = "What do you look for in a partner? (Male)") + theme(axis.text.x = element_text(angle = 90)) 

ggparcoord(genderSet$female, columns = 17:22, groupColumn = 'match', scale = 'uniminmax', title = "What do you look for in a partner? (Female)") + theme(axis.text.x = element_text(angle = 90))

```

It appears that males feel that ambition is not an important attribute when looking for a partner while the over attributes are more diverse (funny not so much). 

For females, most do not put importance on any one attribute, but women who placed higher importance on appearance were more likely to get a date.

```{r coord plot echo=FALSE}
ggparcoord(genderSet$male, columns = 23:27, groupColumn = 'match', scale = 'uniminmax', title = "Rate yourself (Male)")
ggparcoord(genderSet$female, columns = 23:27, groupColumn = 'match', scale = 'uniminmax', title = "Rate yourself (Female)")
```

This seems like people are undervaluing their own attributes but overall there does not seem to be anything discernable from these parallel coordinate plots. This shows there is no importance placed on any one attribute. Below we will use bar charts to make this more distinct.

```{r bar plots echo=FALSE}
par(mar=c(3, 15, 3, 1))
barplot(sapply(genderSet$female[,17:22], mean), las = 1, horiz = TRUE, col = "pink", main = "Average Importance (Female)")

par(mar=c(3, 15, 3, 1))
barplot(sapply(genderSet$male[,17:22], mean), las = 1, horiz = TRUE, col = "lightblue", main = "Average Importance (Male)")

par(mar=c(3, 15, 3, 1))
barplot(sapply(genderSet$female[,23:27], mean), las = 1, horiz = TRUE, col = "pink", main = "Average Rate Yourself (Female)")

par(mar=c(3, 15, 3, 1))
barplot(sapply(genderSet$male[,23:27], mean), las = 1, horiz = TRUE, col = "lightblue", main = "Average Rate Yourself (Male)")

par(mar=c(3, 15, 3, 1))
barplot(sapply(genderSet$female[,45:61], mean), las = 1, horiz = TRUE, col = "pink", main = "Average Rate your Hobbies (Female)")
par(mar=c(3, 15, 3, 1))
barplot(sapply(genderSet$male[,45:61], mean), las = 1, horiz = TRUE, col = "lightblue", main = "Average Rate your Hobbies (Male)")

```

Again not nothing special sticks out, other than males valuing appearance than any category while women value intelligence the most. The hobbies chart between the two gender have some slimilarities.

```{r tree map echo=FALSE}
ffieldData = as.data.frame(table(genderSet$female$field))
colnames(ffieldData) = c("field", "count")
levels(ffieldData$field) = tolower(levels(ffieldData$field))

treemap(ffieldData, index = "field", vSize = "count", type = "index", palette = "Reds", title = "What's your occupation? (Female)", fontsize.title = 14)

mfieldData = as.data.frame(table(genderSet$male$field))
colnames(mfieldData) = c("field", "count")
levels(mfieldData$field) = tolower(levels(mfieldData$field))

treemap(mfieldData, index = "field", vSize = "count", type = "index", palette = "Blues", title = "What's your occupation? (Male)", fontsize.title = 14)
```

Here we can see that for males, business students were over represented in the speed dating experiment. The female major distribution is more diverse.

Here is a correlation matrix between the numeric variables (only upper triangular matrix is shown for brevity). though not particularly useful with so much variables. There does not seem to be any variables that are significantly correlated with one another.

```{r corrplot echo=FALSE}
numdata = data[, sapply(data, is.numeric)]

corrplot(cor(numdata, use = "complete.obs", method = "pearson"), type = "upper", order = "hclust", method="color")
```


How many got a chance at a date?

```{r histogram echo=FALSE}

histogram(data$match)
tmatch = as.data.frame(cbind(table(genderSet$male$match), table(genderSet$female$match)))
colnames(tmatch) = c("Male", "Female")
tmatch
```

Less than 20% of participants got a date.

Both are very similar but there is a slightly higher chance to get a date if you are a female. But Overall it is difficult to discern any meaningful conclusion based on looking at the data since everyone has different tastes and expectations and those may change again whenever you meet someone different; some maybe more accepting of your preferences and some may not.